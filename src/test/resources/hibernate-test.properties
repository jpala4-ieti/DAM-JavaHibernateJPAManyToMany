# ============================================================================
# CONFIGURACIÓ HIBERNATE PER TESTS
# ============================================================================
# Aquest fitxer configura Hibernate per utilitzar H2 (base de dades en memòria)
# durant l'execució dels tests. Això proporciona:
# - Velocitat: H2 en memòria és molt més ràpid que SQLite a disc
# - Aïllament: Cada execució comença amb una BD buida
# - Portabilitat: No depèn de fitxers externs
# ============================================================================

# --- CONNEXIÓ A LA BASE DE DADES H2 ---
# Driver JDBC per H2
hibernate.connection.driver_class=org.h2.Driver

# URL de connexió:
# - mem:testdb -> Base de dades en memòria anomenada "testdb"
# - DB_CLOSE_DELAY=-1 -> Manté la BD oberta mentre hi hagi connexions
# - MODE=MySQL -> Compatibilitat amb sintaxi MySQL (opcional)
hibernate.connection.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=MySQL

# Credencials (per defecte H2 accepta qualsevol usuari)
hibernate.connection.username=sa
hibernate.connection.password=

# --- DIALECTE ---
# Dialecte específic per H2 que genera SQL compatible
hibernate.dialect=org.hibernate.dialect.H2Dialect

# --- GENERACIÓ D'ESQUEMA ---
# create-drop: Crea les taules a l'inici i les elimina al tancar
# Això garanteix aïllament total entre execucions de tests
hibernate.hbm2ddl.auto=create-drop

# --- DEPURACIÓ ---
# Mostrar SQL generat (útil per depurar tests)
hibernate.show_sql=true

# Formatejar SQL per millor llegibilitat
hibernate.format_sql=true

# Mostrar comentaris SQL (indica d'on ve cada query)
hibernate.use_sql_comments=true

# --- RENDIMENT ---
# Mida del batch per operacions massives
hibernate.jdbc.batch_size=20

# Ordenar inserts per optimitzar batching
hibernate.order_inserts=true
hibernate.order_updates=true

# --- ESTADÍSTIQUES ---
# Habilitar estadístiques (útil per tests de rendiment)
hibernate.generate_statistics=true

# --- POOL DE CONNEXIONS ---
# Per tests, utilitzem el pool intern d'Hibernate (suficient per tests)
hibernate.connection.pool_size=5
